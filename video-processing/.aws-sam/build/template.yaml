AWSTemplateFormatVersion: '2010-09-09'
Globals:
  Function:
    Environment:
      Variables:
        CHECKPOINT: true
        FAAS_PLATFORM: aws
        GC: true
        UNUM_INTERMEDIARY_DATASTORE_NAME: unum-intermediate-datastore-video-processing
        UNUM_INTERMEDIARY_DATASTORE_TYPE: dynamodb
    Timeout: 900
Outputs:
  AnalyseFunction:
    Value:
      Fn::GetAtt:
      - AnalyseFunction
      - Arn
  DecodeFunction:
    Value:
      Fn::GetAtt:
      - DecodeFunction
      - Arn
  SummarizeFunction:
    Value:
      Fn::GetAtt:
      - SummarizeFunction
      - Arn
Resources:
  AnalyseFunction:
    Properties:
      CodeUri: AnalyseFunction
      Handler: main.lambda_handler
      Policies:
      - AWSLambdaBasicExecutionRole
      - AWSLambdaRole
      - AmazonDynamoDBFullAccess
      - AmazonS3FullAccess
      Runtime: python3.12
    Type: AWS::Serverless::Function
    Metadata:
      SamResourceId: AnalyseFunction
  DecodeFunction:
    Properties:
      CodeUri: DecodeFunction
      Handler: main.lambda_handler
      Policies:
      - AWSLambdaBasicExecutionRole
      - AWSLambdaRole
      - AmazonDynamoDBFullAccess
      - AmazonS3FullAccess
      Runtime: python3.12
    Type: AWS::Serverless::Function
    Metadata:
      SamResourceId: DecodeFunction
  SummarizeFunction:
    Properties:
      CodeUri: SummarizeFunction
      Handler: main.lambda_handler
      Policies:
      - AWSLambdaBasicExecutionRole
      - AWSLambdaRole
      - AmazonDynamoDBFullAccess
      - AmazonS3FullAccess
      Runtime: python3.12
    Type: AWS::Serverless::Function
    Metadata:
      SamResourceId: SummarizeFunction
Transform: AWS::Serverless-2016-10-31
